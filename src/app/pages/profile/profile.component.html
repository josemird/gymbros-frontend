<div class="profile-container">
  <div class="profile-card">
    <label class="image-upload">
      <img
        [src]="form.get('photo')?.value ?
               'https://vps-ff89e3e0.vps.ovh.net/uploads/' + form.get('photo')?.value :
               'https://pentaxcenter.com/wp-content/uploads/no-user-image-square.jpg'"
        alt="Foto de perfil" />
      <input type="file" accept="image/*" (change)="onPhotoSelected($event)" hidden />
    </label>

    <p *ngIf="form.get('photo')?.value" class="filename">
      {{ form.get('photo')?.value }}
    </p>

    <p *ngIf="photoError" class="error-text">{{ photoError }}</p>

    <form [formGroup]="form">
      <div class="field-row" *ngFor="let field of ['name', 'username', 'email', 'gym', 'age', 'favorite_exercises', 'goals', 'hobbies']">
        <label>{{ field | titlecase }}</label>
        <div class="input-group">
          <input [formControlName]="field" [readonly]="editingField !== field" />
          <button type="button" (click)="onEdit(field)">
            {{ editingField === field ? 'Guardar' : 'Editar' }}
          </button>
        </div>
      </div>
    </form>

    <div class="password-section">
      <button (click)="showPasswordChange = !showPasswordChange">
        Cambiar contrase単a
      </button>

      <div *ngIf="showPasswordChange" class="password-form">
        <input type="password" placeholder="Nueva contrase単a" [(ngModel)]="newPassword" />
        <input type="password" placeholder="Confirmar contrase単a" [(ngModel)]="confirmPassword" />
        <button (click)="onPasswordChange()">Guardar contrase単a</button>
        <p *ngIf="error">{{ error }}</p>
      </div>
    </div>

    <button class="delete-button" (click)="onDelete()">Eliminar cuenta</button>
  </div>
</div>
